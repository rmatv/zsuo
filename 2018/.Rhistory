update.packages()
packs = as.data.frame(installed.packages(.libPaths()[1]), stringsAsFactors = F)
packs
View(packs)
installed.packages()
?installed.packages
installed.packages(lib.loc = "/Library/Frameworks/R.framework/Versions/3.6/Resources/library/")
installed.packages(lib.loc = "/Library/Frameworks/R.framework/Versions/Current/Resources/library/")
library(dplyr)
installed.packages(lib.loc = "~/Library/R/3.6/library/")
tmp <- installed.packages(lib.loc = "~/Library/R/3.6/library/")
View(tmp)
installedpkgs.new <- as.vector(tmp[is.na(tmp[,"Priority"]), 1])
installedpkgs.new
missing <- setdiff(installedpkgs, installedpkgs.new)
old <- installed.packages(lib.loc = "~/Library/R/3.6/library/")
old <- as.vector(tmp[is.na(old[,"Priority"]), 1])
missing <- setdiff(installedpkgs, installedpkgs.new)
old <- as.vector(tmp[is.na(old[,"Priority"]), 1])
old <- as.vector(old[is.na(old[,"Priority"]), 1])
new <- installed.packages()
new <- as.vector(new[is.na(new[,"Priority"]), 1])
new <- installed.packages()
new <- as.vector(new[is.na(new[,"Priority"]), 1])
new <- installed.packages()
View(new)
new <- installed.packages()
new <- installed.packages()[1, ]
new <- installed.packages()
new <- as.vector(new[is.na(new[,"Priority"]), 1])
new <- installed.packages()
new <- as.vector(new[is.na(new[,"Priority"]), 1])
old <- installed.packages(lib.loc = "~/Library/R/3.6/library/")
old <- as.vector(old[is.na(old[,"Priority"]), 1])
new <- installed.packages()
new[is.na(new[,"Priority"]), 1]
old <- installed.packages(lib.loc = "~/Library/R/3.6/library/")
old <- as.vector(old[is.na(old[,"Priority"]), 1])
new <- installed.packages()
is.na(new[,"Priority"])
View(new)
new[is.na(new[,"Priority"]), 1]
new <- as.vector(new[, 1])
old <- installed.packages(lib.loc = "~/Library/R/3.6/library/")
View(old)
old <- installed.packages(lib.loc = "~/Library/R/3.6/library/")
old <- as.vector(old[is.na(old[,"Priority"]), 1])
new <- installed.packages()
new <- as.vector(new[is.na(new[,"Priority"]), 1])
missing <- setdiff(old, new)
install.packages(missing)
update.packages()
old <- installed.packages(lib.loc = "~/Library/R/3.6/library/")
old <- as.vector(old[is.na(old[,"Priority"]), 1])
new <- installed.packages()
new <- as.vector(new[is.na(new[,"Priority"]), 1])
missing <- setdiff(old, new)
library(dplyr)
library(psych)
install.packages("npmv")
library(npmv)
q('no')
q('no')
small.fights <- 29
small.fights <- 29
medium.fights <- 14
large.fights <- 14
rbind(small.fights, medium.fights, large.fights)
bets <- rbind(small.fights, medium.fights, large.fights)
bets <- data.frame(rbind(small.fights, medium.fights, large.fights))
bets <- data.frame(num = rbind(small.fights, medium.fights, large.fights))
View(bets)
bets$min <- c(15, 40, 100)
bets$max <- c(40, 100, 500)
View(bets)
bets$mid <- (bets$max - bets$min) / 2
bets$mid <- bets$min + ((bets$max - bets$min) / 2)
bets$mean <- sum(bets$num * bets$mid)
mean.bets <- sum(bets$num * bets$mid)
mean.bets <- sum(bets$num * bets$mid) / sum(num)
mean.bets <- sum(bets$num * bets$mid) / sum(num)
mean.bets <- sum(bets$num * bets$mid) / sum(bets$num)
bets$mid * bets$num
29 * 27.5
sum(bets$mid * bets$num)
small.fights <- 29
medium.fights <- 14
large.fights <- 14
bets <- data.frame(num = rbind(small.fights, medium.fights, large.fights))
View(bets)
bets$min <- c(15, 40, 100)
bets$max <- c(40, 100, 500)
bets$mid <- bets$min + ((bets$max - bets$min) / 2)
sum(bets$mid * bets$num)
sum(bets$mid * bets$num) / sum(num)
sum(bets$mid * bets$num) / sum(bets$num)
small.fights <- 29
medium.fights <- 14
large.fights <- 14
bets <- data.frame(num = rbind(small.fights, medium.fights, large.fights))
bets$per <- bets$num / sum(bets$num)
View(bets)
sum(bets$per)
bets$min <- c(15, 40, 100)
bets$max <- c(40, 100, 500)
bets$mid <- bets$min + ((bets$max - bets$min) / 2)
bets$mid * bets$num
bets$mid * bets$num * bets$per
(bets$mid * bets$num)
sum(bets$mid * bets$num) / sum(bets$num)
85 * 57
sum(bets$mid * bets$num)
bets$mid * bets$num
bets$mid * bets$num / bets$num
sum(bets$mid * bets$num) / bets$num
sum(bets$mid * bets$num) / sum(bets$num)
sum(bets$mid * bets$num) / sum(bets$num)
sum(bets$mid * bets$num * bets$per) / sum(bets$num)
sum(bets$mid * bets$num) / sum(bets$num)
sum(bets$mid * bets$num) / sum(bets$num)
small.fights <- 29
medium.fights <- 14
large.fights <- 14
small.fights <- 29
medium.fights <- 14
large.fights <- 14
bets <- data.frame(num = rbind(small.fights, medium.fights, large.fights))
bets$per <- bets$num / sum(bets$num)
# bets$per <- bets$num / sum(bets$num)
bets$min <- c(15, 40, 100)
bets$max <- c(40, 100, 500)
bets$mid <- bets$min + ((bets$max - bets$min) / 2)
bets$mid <- round(bets$min + ((bets$max - bets$min) / 2), 0)
bets$diff <- bets$mid - 85
sum(bets$diff * bets$num) / sum(bets$num)
sum(bets$diff * bets$num) / sum(bets$num)
bets$diff <- abs(bets$mid - 85)
sum(bets$diff * bets$num) / sum(bets$num)
sum(bets$diff * bets$num)
bets$diff * bets$num)
bets$diff * bets$num
bets$max <- c(40, 100, 500)
bets
26 * 28 + 66 * 14 + 226 * 14
(26 * 28 + 66 * 14 + 226 * 14) / 57
(26 * 29 + 66 * 14 + 226 * 14) / 57
outcomes <- data.frame(num = rbind(small.fights, medium.fights, large.fights))
outcomes$favourites <- c(19, 2, 5, 7)
outcomes$underdogs <- c(10, 3, 4, 7)
favourites <- c (2, 5)
underdogs <- c (3, 4)
cockfights <- cbind(favourites, underdogs)
fisher.test(cockfights)
cbind(
c(19, 2, 5, 7)
)
cbind(
c(19, 2, 5, 7),
c(10, 3, 4, 7)
)
chisq.test(cbind(
c(19, 2, 5, 7),
c(10, 3, 4, 7)
))
chisq.test(cbind(
c(19, 2, 5, 7),
c(10, 3, 4, 7)
))
fisher.test(cbind(
c(19, 2, 5, 7),
c(10, 3, 4, 7)
))
bets <- data.frame(bets = c("15-35", "35-40", "40-60", "60-70", "75-100",
"100-175", "175-500"))
bets <- data.frame(bets = rbind("15-35", "35-40", "40-60", "60-70", "75-100",
"100-175", "175-500"))
bets <- data.frame(bets = rbind("15-35", "35-40", "40-60", "60-70", "75-100",
"100-175", "175-500"))
View(bets)
bets$min <- c(15, 35, 40, 60, 70, 75, 100, 175)
bets$min <- c(15, 35, 40, 60, 75, 100, 175)
bets$min <- c(35, 40, 60, 75, 100, 175, 500)
bets$min <- c(15, 35, 40, 60, 75, 100, 175)
bets$max <- c(35, 40, 60, 75, 100, 175, 500)
strsplit(bets$bets)
strsplit(bets$bets, split = "-")
strsplit(bets$bets, split = "-")[1]
strsplit(bets$bets, split = "-")[[1]]
unlist(strsplit(bets$bets, split = "-"))
unlist(strsplit(bets$bets, split = "-")[1])
unlist(strsplit(bets$bets, split = "-")[[1]])
unlist(strsplit(bets$bets, split = "-"))
strsplit(bets$bets, split = "-")
strsplit(bets$bets, split = "-")[][1]
as.data.frame(strsplit(bets$bets, split = "-"))
data.frame(strsplit(bets$bets, split = "-"))
cbind(strsplit(bets$bets, split = "-"))
strsplit(bets$bets, split = "-")
strsplit(bets$bets, split = "-")[[1]][1]
strsplit(bets$bets, split = "-")[[2]][1]
unlist(strsplit(bets$bets, split = "-"))
matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2)
matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2, byrow = TRUE)
cbind(bets, matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2, byrow = TRUE))
bets <- rbind("15-35", "35-40", "40-60", "60-70", "75-100",
"100-175", "175-500")
bets <- cbind(bets, matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2, byrow = TRUE))
bets <- cbind(bets, matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2, byrow = TRUE))
bets <- data.frame(bets = rbind("15-35", "35-40", "40-60", "60-70", "75-100",
"100-175", "175-500"))
bets <- cbind(bets, matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2, byrow = TRUE))
colnames(bets)[2, 3]
colnames(bets)[c(2, 3)]
colnames(bets)[c(2, 3)] <- c("min", "max")
bets$num <- c(26, 3, 5, 6, 3, 8, 6)
sum(bets$num)
bets$mid <- bets$min + (bets$max - bets$min)
bets <- cbind(bets, matrix(unlist(as.numeric(strsplit(bets$bets, split = "-"))), ncol = 2, byrow = TRUE))
bets <- cbind(bets, matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2, byrow = TRUE))
bets <- data.frame(bets = rbind("15-35", "35-40", "40-60", "60-70", "75-100",
"100-175", "175-500"))
bets <- cbind(bets, matrix(unlist(strsplit(bets$bets, split = "-")), ncol = 2, byrow = TRUE))
apply(bets[, c(2, 3)], as.numeric)
sapply(bets[, c(2, 3)], as.numeric)
bets[, c(2, 3)] <- sapply(bets[, c(2, 3)], as.numeric)
colnames(bets)[c(2, 3)] <- c("min", "max")
bets$num <- c(26, 3, 5, 6, 3, 8, 6)
bets$mid <- bets$min + (bets$max - bets$min)
bets$mid <- bets$min + (bets$max - bets$min) / 2
bets$mid <- round(bets$min + (bets$max - bets$min) / 2, 0)
View(bets)
sum(bets$mid * bets$num) / sum(bets$num)
sum(bets$mid * bets$num) / sum(bets$num)
bets
rownames(bets) <- bets$bets
bets
bets <- bets[c(3, 4)]
matches.total <- 57
matches.total <- 57
data.frame(
rbind(matches = c("small", "medium", "large", "other"))
)
data.frame(
cbind(matches = c("small", "medium", "large", "other"))
)
data.frame(
cbind(small = .45)
)
data.frame(
cbind(small = .45,
medium = .25,
large = .2)
)
data.frame(
rbind(small = .45,
medium = .25,
large = .2)
)
data.frame(
cbind(small = .45,
medium = .25,
large = .2)
)
data.frame(
n = cbind(small = .45,
medium = .25,
large = .2)
)
data.frame(
n = rbind(small = .45,
medium = .25,
large = .2)
)
data.frame(
per = rbind(small = .45,
medium = .25,
large = .2)
)
data.frame(per = rbind(small = .45,
medium = .25,
large = .2))
matches <- data.frame(per = rbind(small = .45,
medium = .25,
large = .2))
matches$n <- matches$per * matches.total
matches$n <- round(matches$per * matches.total, 0)
matches <- data.frame(per = rbind(small = .45,
medium = .25,
large = .2,
other = 1 - (.45 + .25 + .2)))
sum(matches$per)
matches$n <- round(matches$per * matches.total, 0)
matches
colSums(matches)
matches <- data.frame(per = rbind("мелкие" = .45,
medium = .25,
large = .2,
other = 1 - (.45 + .25 + .2)))
matches
matches <- data.frame(per = rbind("мелкие" = .45,
"средние" = .25,
"крупные" = .2,
"прочие" = 1 - (.45 + .25 + .2)))
matches
rbind(matches, "всего" = colSums(matches))
matches$n <- round(matches$per * matches.total, 0)
rbind(matches, "всего" = colSums(matches))
matches <- rbind(matches, "всего" = colSums(matches))
matches
matches$mid <- c(35, 70, 175)
matches <- data.frame(per = rbind("мелкие" = .45,
"средние" = .25,
"крупные" = .2,
"прочие" = 1 - (.45 + .25 + .2)))
matches$n <- round(matches$per * matches.total, 0)
# matches <- rbind(matches, "всего" = colSums(matches))
matches$mid <- c(35, 70, 175, NA)
matches$diff <- c(15, 20, 75, NA)
matches.total <- 57
matches <- data.frame(per = rbind("мелкие" = .45,
"средние" = .25,
"крупные" = .2,
"прочие" = 1 - (.45 + .25 + .2)))
matches$n <- round(matches$per * matches.total, 0)
matches <- rbind(matches, "всего" = colSums(matches))
matches
matches$bets <- c("35±15", "70±20", "175±75", "—")
matches.total <- 57
matches <- data.frame(per = rbind("мелкие" = .45,
"средние" = .25,
"крупные" = .2,
"прочие" = 1 - (.45 + .25 + .2)))
matches$bets <- c("35±15", "70±20", "175±75", "—")
View(matches)
matches <- data.frame(per = rbind("мелкие" = "35±15",
"средние" = "70±20",
"крупные" = "175±75",
"прочие" = "—")
matches$bets <- c(.45, .25, .2, 1 - (.45 + .25 + .2)))
matches <- data.frame(per = rbind("мелкие" = "35±15",
"средние" = "70±20",
"крупные" = "175±75",
"прочие" = "")
matches$bets <- c(.45, .25, .2, 1 - (.45 + .25 + .2)))
matches <- data.frame(per = rbind("мелкие" = "35±15",
"средние" = "70±20",
"крупные" = "175±75",
"прочие" = ""))
matches <- data.frame(per = rbind("мелкие" = "35±15",
"средние" = "70±20",
"крупные" = "175±75",
"прочие" = "—"))
matches
matches <- data.frame(range = rbind("мелкие" = "35±15",
"средние" = "70±20",
"крупные" = "175±75",
"прочие" = "—"))
matches$per <- c(.45, .25, .2, 1 - (.45 + .25 + .2)))
matches$per <- c(.45, .25, .2, 1 - (.45 + .25 + .2))
matches$n <- round(matches$per * matches.total, 0)
matches <- rbind(matches, "всего" = colSums(matches))
matches <- rbind(matches, "всего" = colSums(matches[c(2, 3)]))
matches
matches <- data.frame(range = rbind("мелкие" = "35±15",
"средние" = "70±20",
"крупные" = "175±75",
"прочие" = "—"))
matches$per <- c(.45, .25, .2, 1 - (.45 + .25 + .2))
matches$n <- round(matches$per * matches.total, 0)
matches
matches <- rbind(matches, "всего" = c("", colSums(matches[c(2, 3)])))
matches
q('no')
setwd('~/git/zsuo/2018/')
zsuo.prop <- read.csv("prop.csv", sep = ";", dec = ",")
View(zsuo.prop)
results <- data.frame(party = colnames(zsuo.prop[, 4:12]), stringsAsFactors = FALSE)
View(results)
results$votes <- colSums(zsuo.prop[, 4:12])
results$percents <- results$votes / sum(results$votes)
results <- results[order(results$percents, decreasing = T), ]
View(results)
lenght(results$percents >= .05)
length(results$percents >= .05)
length(results$percents >= .05)
View(results)
results$percents
results$percents >= .05
length(results$percents >= .05 == TRUE)
results[results$percents >= .05]
results[results$percents >= .05, ]
elected <- results[results$percents >= .05, ]
elected <- results[results$percents >= .05, c(1, 2)]
elected <- results[results$percents >= .05, 2)]
elected <- results[results$percents >= .05, 2]
names(elected) <- results[results$percents >= .05, 1]
elected
elected / 2
elected / 4
rbind(elected / 2,
elected / 3,
elected / 4)
list(elected / 2,
elected / 3,
elected / 4)
unlist(list(elected / 2,
elected / 3,
elected / 4))
order(unlist(list(elected / 2,
elected / 3,
elected / 4)))
unlist(list(elected / 2,
elected / 3,
elected / 4))
elected <- results[results$percents >= .05, 2]
names(elected) <- results[results$percents >= .05, 1]
seats <- 18
seats <- rep(NA, 18)
for (i in 1:18)
ratio = elected / i
print(i)
print(i)
print(i)
for(i in 1:10)
print(i)
for(i in 1:10) {
print(i)
}
for(i in 1:18) {
print(i)
}
for(i in 1:18) {
elected / i
}
for(i in 1:18) {
elected / i
}
for(i in 1:18) {
ratio = elected / i
}
seq_along(18)
setwd('~/git/zsuo/2018/')
zsuo.prop <- read.csv("prop.csv", sep = ";", dec = ",")
results <- data.frame(party = colnames(zsuo.prop[, 4:12]), stringsAsFactors = FALSE)
results$votes <- colSums(zsuo.prop[, 4:12])
results$percents <- results$votes / sum(results$votes)
results <- results[order(results$percents, decreasing = T), ]
elected <- results[results$percents >= .05, ]
View(elected)
elected <- results[results$percents >= .05, c(1, 2)]
test <- c()
elected$votes / 2
elected$votes / 3
elected$votes / 4
elected$votes / 5
elected$votes / 6
for (i in 1:18) {
test[i] <- elected$votes / i
}
test
elected <- results[results$percents >= .05, 2]
names(elected) <- results[results$percents >= .05, 1]
test <- c()
for (i in 1:18) {
test[i] <- elected$votes / i
}
test[i] <- elected / i
test <- c()
for (i in 1:18) {
test[i] <- elected / i
}
test
warnings
for (i in 2:18) {
test <- elected / i
}
test <- c()
for (i in 2:18) {
test <- elected / i
}
4 * 17
test <- array(numeric(),c(2,3,0))
test
divisor <- 2
test <- array(numeric(),c(nrow(elected), seats - 1,0))
seats <- 18
divisor <- 2
test
test <- array(numeric(),c(nrow(elected), seats - 1, 0))
test
test <- array(numeric(),c(nrow(elected), seats, 0))
test <- array(numeric(),c(nrow(elected), seats, 0))
test <- array(numeric(),c(nrow(elected), 17, 0))
test <- array(numeric(),c(nrow(elected), 2,0))
array(numeric(),c(2,3,0))
test <- array(numeric(),c(2,3,0))
test
array(numeric(), c(4,3,0))
array(numeric(), c(4, 17,0))
array(numeric(), c(17, 4, 0))
array(numeric(), c(seats - divisor + 1, 4, 0))
array(numeric(), c(seats - divisor + 1, length(elected), 0))
test <- array(numeric(), c(seats - divisor + 1, length(elected), 0))
test
for (i in divisor:seats) {
test <- elected / i
}
test
q(no)
q("no")
